# Traceability & Testing Workflow Templates

This directory contains templates and reference documentation for the traceability-and-testing workflow.

---

## Files in this Directory

### Output Templates (Used to generate the 4 workflow output files)

### 1. `traceability-map-template.md`
**Purpose:** Template for main traceability document (OUTPUT FILE #3)
**Used by:** Steps 2-4
**Generates:** `{implementation_artifacts}/traceability-artifacts/traceability-map.md`
**Description:** Template structure for the complete traceability document that contains PRD‚ÜíFR‚ÜíEpic‚ÜíStory‚ÜíTask hierarchy (NO test information)

### 2. `test-cases-summary-template.md`
**Purpose:** Template for test cases summary document (OUTPUT FILE #2)
**Used by:** Step 3
**Generates:** `{implementation_artifacts}/traceability-artifacts/test-cases-summary.md`
**Description:** Template for summarizing all test cases by Type, Suite, and Status

### 2. `test-cases-template.csv`
**Purpose:** Standard CSV template for test cases (EMPTY - STRUCTURE ONLY)
**Used by:** Projects wanting to start from scratch
**Description:** Minimal structure (1.2 KB) with:
- Header structure (rows 1-12 only)
- All 20 standard columns
- NO test case examples (will be auto-generated by workflow)
- Clean starting point for auto-population

**Use this file to:**
- Create new test case files for projects from scratch
- Reference correct CSV structure
- Start with clean slate

### 3. `test-cases-reference.csv`
**Purpose:** Minimal reference for UNDERSTANDING structure - KNOWLEDGE BASE (1.2 KB)
**Used by:** Workflow's internal knowledge base - REFERENCE ONLY, NOT copied to projects
**Description:** Minimal structure reference:
- Basic header structure (rows 1-12 only)
- All 20 standard columns defined
- NO test case examples (optimized for performance)
- Lightweight documentation of structure

**Use this file to:**
- **Workflow's brain:** The workflow reads this to understand test case structure
- **Learn structure:** See how test cases should be formatted
- **Study examples:** Reference for comprehensive test case examples
- **Validation:** Workflow knows what valid test cases look like

**üîí Critical:** This is the PERMANENT KNOWLEDGE BASE of the workflow. It contains the complete structure that the workflow uses to:
- Understand test case format
- Parse any test case file
- Validate data structure
- **GENERATE test cases automatically** based on FRs/Epics/Stories

**‚ö†Ô∏è Important:** This file is NOT copied to projects. The workflow uses `test-cases-template.csv` (empty) to create files in projects, then GENERATES test cases automatically.

### 4. `test-cases-structure.md`
**Purpose:** Complete documentation of test case file structure
**Used by:** Workflow (permanent reference), developers, QA teams
**Description:** Canonical reference document that defines:
- CSV/Excel file format specifications
- All 20 column definitions with descriptions
- Data organization hierarchy (OP ‚Üí Suite ‚Üí Test Case)
- Parsing instructions for the workflow
- Best practices and standards
- Multi-sheet structure for Excel files
- Integration with Epic/Story structure

**This is the definitive source of truth** for test case file format in all BMAD projects.

---

## How These Templates Are Used

### During Workflow Initialization (Step 1)
1. Workflow references `test-cases-structure.md` and `test-cases-reference.csv` to understand file format
2. Workflow searches for test case files in project root using generic patterns
3. **If no file found:** Workflow automatically creates EMPTY `test-cases.csv` by copying `test-cases-template.csv`
   - File contains ONLY structure (rows 1-33)
   - NO test case data - will be generated automatically in Step 3
4. **4 main output files are initialized in `{implementation_artifacts}/traceability-artifacts/`:**
   - **File #1:** `test-cases.csv` - Created immediately (EMPTY, structure only)
   - **File #2:** `test-cases-summary.md` - Will be created in Step 3
   - **File #3:** `traceability-map.md` - Will be created in Steps 2-4
   - **File #4:** `traceability-export.csv` - Will be created in Step 5
5. **Epic test plans are created in `{implementation_artifacts}/epic-test-plans/`:**
   - Individual epic-x-test-plan.md files (generated in Step 4)

### During Workflow Execution (Steps 2-5)

**Step 2:** Build Traceability
- Starts populating `traceability-map.md` using `traceability-map-template.md`

**Step 3:** Generate and Interpret Test Cases
- **GENERATES test cases automatically** based on FRs/Epics/Stories found in project
- Populates `test-cases.csv` with generated test cases
- Creates `test-cases-summary.md` using `test-cases-summary-template.md`
- Continues building `traceability-map.md`
- Maps generated test cases to FRs/Epics/Stories

**Step 4:** Generate Test Plans
- Completes `traceability-map.md`

**Step 5:** Export
- Creates `traceability-export.csv` with all data in CSV format

### For New Projects

**The workflow is completely automated with AUTO-GENERATION:**

1. **Run the workflow:** Execute `/traceability-and-testing`
2. **Workflow analyzes your project:**
   - Reads FRs (Functional Requirements)
   - Reads Epics
   - Reads Stories
   - Reads Tasks
3. **Workflow creates files automatically in two directories:**

   **In `{implementation_artifacts}/traceability-artifacts/` (4 main files):**
   - `test-cases.csv` - Created EMPTY (structure only), then POPULATED automatically by workflow
   - `test-cases-summary.md` - Generated summary of auto-generated test cases
   - `traceability-map.md` - Generated traceability map (PRD‚ÜíFR‚ÜíEpic‚ÜíStory‚ÜíTask)
   - `traceability-export.csv` - CSV export for external analysis

   **In `{implementation_artifacts}/epic-test-plans/` (epic test plans):**
   - `epic-1-test-plan.md` - Test plan for Epic 1
   - `epic-2-test-plan.md` - Test plan for Epic 2
   - etc. (one file per epic)

4. **Test cases are GENERATED automatically:**
   - Workflow analyzes each FR/Epic/Story
   - Generates appropriate test cases for each functionality
   - Populates test-cases.csv automatically
   - No manual editing needed!
5. **Optional:** Edit `{implementation_artifacts}/traceability-artifacts/test-cases.csv` to refine generated test cases
6. **Re-run workflow:** Regenerate traceability with any manual changes

**No manual setup needed!** The workflow:
- Creates empty structure
- Analyzes your project
- Generates test cases automatically
- Creates all traceability documents

**Files are organized in two locations:**
- **Main artifacts:** `{implementation_artifacts}/traceability-artifacts/`
- **Epic test plans:** `{implementation_artifacts}/epic-test-plans/`

---

## File Locations (Referenced in Workflow)

```yaml
templateFile: '{workflow_path}/templates/traceability-map-template.md'
testCaseTemplateFile: '{workflow_path}/templates/test-cases-template.csv'
testCaseReferenceFile: '{workflow_path}/templates/test-cases-reference.csv'
testCaseStructureDoc: '{workflow_path}/templates/test-cases-structure.md'
```

**Key Difference:**
- `testCaseTemplateFile` - Minimal template for starting from scratch
- `testCaseReferenceFile` - Full reference with complete examples (FALLBACK)

---

## üö® CRITICAL: Path Handling in Templates

**RULE:** ALL file paths in templates and generated documents MUST be relative to project-root, NEVER absolute.

### Why This Matters

Absolute paths (e.g., `C:\Users\username\Desktop\project\...`) are:
- ‚ùå Machine-specific
- ‚ùå Break when shared between team members
- ‚ùå Break when project is moved
- ‚ùå Leak user information

Relative paths (e.g., `_bmad-output/4-implementation/...`) are:
- ‚úÖ Portable across machines
- ‚úÖ Work for all team members
- ‚úÖ Remain valid when project is moved
- ‚úÖ Professional and clean

### Implementation

When a template has a placeholder for a path (like `{{test_case_file}}`):
1. The step must convert absolute path to relative BEFORE replacing the placeholder
2. Use this pattern:
   ```javascript
   relative_path = absolute_path.replace(project_root + separator, "")
   ```
3. Replace placeholder with relative_path, not absolute_path

### Current Path Fields in Templates

**test-cases-summary-template.md:**
- ‚ùå `testCaseFile` field **REMOVED** - no longer needed after cleanup

**traceability-map-template.md:**
- No path placeholders (cleaned up)

**epic-test-plan-template.md:**
- Check for any path references and ensure they use relative paths

---

## Maintaining These Templates

### When to Update

Update `test-cases-structure.md` when:
- Column definitions change
- New fields are added
- Standard values/formats change
- Parsing logic needs clarification

Update `test-cases-template.csv` when:
- Structure changes (must match documentation)
- Better examples are identified
- New test types need examples

Update `traceability-map-template.md` when:
- Output format requirements change
- New sections are needed
- Section ordering changes

### Version Control

These templates are version-controlled with the workflow:
- Template version should match workflow version
- Document all changes in version history
- Update "Last Updated" dates

---

## Related Documentation

- **Main Workflow:** `../workflow.md`
- **Step 1 (Init):** `../steps/step-01-init.md`
- **Step 3 (Interpret Test Cases):** `../steps/step-03-interpret-test-cases.md`

---

## Support

For questions or issues with these templates:
1. Check `test-cases-structure.md` for detailed documentation
2. Review example test cases in `test-cases-template.csv`
3. Consult workflow step files for usage context
4. Contact BMAD team for template updates

---

**Note:** These templates are critical infrastructure for the workflow. Do not modify without understanding the impact on workflow execution.
